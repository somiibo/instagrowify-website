"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[8006],{8006:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(2984);function i(e){const{webManager:t}=e;let i=null;const a="true"===new URL(window.location.href).searchParams.get("authPopup")||window!==window.top;function s({data:e,setError:t,$submitButton:n}){const o=n?.getAttribute("data-provider");"email"===o&&(e.email?.trim()||t("email","Email is required"),e.password||t("password","Password is required"))}function r(e,o){return async({data:s,$submitButton:r})=>{const c=r?.getAttribute("data-provider");"email"===c?await o(s):c&&await async function(e,o="signin"){try{const{getAuth:t,signInWithPopup:s,signInWithRedirect:r,GoogleAuthProvider:c,FacebookAuthProvider:u,TwitterAuthProvider:d,GithubAuthProvider:l}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),m=t();let g;switch(e){case"google.com":g=new c;break;case"facebook.com":g=new u;break;case"twitter.com":g=new d;break;case"github.com":g=new l;break;default:throw new Error(`Unsupported provider: ${e}`)}if(a)try{const t=await s(m,g);console.log("Successfully authenticated via popup:",t.user.email);const n=t.additionalUserInfo?.isNewUser;n||"signup"===o?(w(e,t.user),i.showSuccess("Account created successfully!")):(h(e,t.user),i.showSuccess("Successfully signed in!"))}catch(e){if("auth/popup-blocked"!==e.code&&"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code)throw e;console.log("Popup failed, falling back to redirect:",e.code),await r(m,g)}else console.log("Using redirect for authentication"),await r(m,g)}catch(e){if(l(e.code)||t.sentry().captureException(new Error("OAuth provider sign-in error",{cause:e})),"auth/account-exists-with-different-credential"===e.code)throw new Error("An account already exists with the same email address but different sign-in credentials. Try signing in with a different provider.");if("auth/invalid-credential"===e.code)throw new Error("Invalid credentials. Please try again.");if("auth/operation-not-allowed"===e.code)throw new Error("This sign-in method is not enabled. Please contact support.");if("auth/user-disabled"===e.code)throw new Error("This account has been disabled. Please contact support.");throw e}}(c,e)}}async function c(e,t){const{getAuth:o,signInWithEmailAndPassword:i}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),a=o();return await i(a,e,t)}async function u(e){const t=e.email?.trim()||"",o=e.password||"",{getAuth:a,createUserWithEmailAndPassword:s}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),r=a();try{w("email",(await s(r,t,o)).user),i.showSuccess("Account created successfully!")}catch(e){if("auth/email-already-in-use"===e.code)try{return console.log("Email already in use, attempting to sign in instead:",t),h("email",(await c(t,o)).user),void i.showSuccess("Successfully signed in!")}catch(e){throw new Error("An account with this email already exists")}throw e}}async function d(e){const t=e.email?.trim()||"",n=e.password||"";console.log("Attempting email sign-in for:",t),h("email",(await c(t,n)).user),i.showSuccess("Successfully signed in!")}function l(e){return["auth/user-not-found","auth/wrong-password","auth/invalid-credential","auth/invalid-email","auth/weak-password","auth/email-already-in-use","auth/user-disabled","auth/too-many-requests","auth/popup-closed-by-user","auth/cancelled-popup-request"].includes(e)}function h(e,t){const n=t.uid,o=e.charAt(0).toUpperCase()+e.slice(1);gtag("event","login",{method:e,user_id:n}),fbq("trackCustom","Login",{content_name:`Account Login ${o}`,method:e}),ttq.track("Login",{content_id:`account-login-${e}`,content_type:"product",content_name:`Account Login ${o}`})}function w(e,t){const n=t.uid,o=e.charAt(0).toUpperCase()+e.slice(1);gtag("event","sign_up",{method:e,user_id:n}),fbq("track","CompleteRegistration",{content_name:`Account Registration ${o}`,method:e}),ttq.track("CompleteRegistration",{content_id:`account-registration-${e}`,content_type:"product",content_name:`Account Registration ${o}`})}function m(){gtag("event","password_reset",{method:"email",status:"success"}),fbq("trackCustom","PasswordReset",{method:"email",status:"success"}),ttq.track("SubmitForm",{content_id:"password-reset",content_type:"product",content_name:"Password Reset"})}t.dom().ready().then(async()=>{await async function(e){const t=new URL(window.location.href);if("true"===t.searchParams.get("authSignout"))try{console.log("Signing out user due to authSignout=true parameter"),await e.auth().signOut(),t.searchParams.delete("authSignout"),window.history.replaceState({},document.title,t.toString())}catch(e){console.error("Error signing out:",e)}}(t),function(){const e=document.documentElement.getAttribute("data-page-path");e?"/signin"===e?(i=new o.A("#signin-form",{allowResubmit:!1,submittingText:"Signing in...",submittedText:"Signed In!"}),i.on("validation",s),i.on("submit",r("signin",d))):"/signup"===e?(i=new o.A("#signup-form",{allowResubmit:!1,submittingText:"Creating account...",submittedText:"Account Created!"}),i.on("validation",s),i.on("submit",r("signup",u))):"/reset"===e&&(i=new o.A("#reset-form",{allowResubmit:!1,submittingText:"Sending...",submittedText:"Email Sent!"}),i.on("submit",({data:e})=>async function(e){const t=e.email?.trim()||"",{getAuth:o,sendPasswordResetEmail:a}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),s=o();try{await a(s,t),m(),i.showSuccess(`Password reset email sent to ${t}. Please check your inbox.`)}catch(e){if("auth/user-not-found"===e.code)return m(),void i.showSuccess(`If an account exists for ${t}, a password reset email has been sent.`);throw e}}(e))):console.warn("No data-page-path attribute found on HTML element")}(),await async function(){try{const{getAuth:e,getRedirectResult:t}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),o=e(),a=await t(o);if(console.log("Redirect result:",a),!a||!a.user)return;console.log("Successfully authenticated via redirect:",a.user.email);const s=a.providerId||a.user.providerData?.[0]?.providerId||"unknown",r=a.additionalUserInfo?.isNewUser,c=document.documentElement.getAttribute("data-page-path");r||"/signup"===c?(w(s,a.user),i.showSuccess("Account created successfully!")):(h(s,a.user),i.showSuccess("Successfully signed in!"))}catch(e){l(e.code)||t.sentry().captureException(new Error("Error handling redirect result",{cause:e})),"auth/account-exists-with-different-credential"===e.code?i.showError("An account already exists with the same email address but different sign-in credentials. Try signing in with a different provider."):"auth/popup-blocked"===e.code?i.showError("Popup was blocked. Please allow popups for this site and try again."):"auth/operation-not-allowed"===e.code?i.showError("This sign-in method is not enabled."):e.code&&"auth/cancelled-popup-request"!==e.code&&i.showError(`Authentication error: ${e.message}`)}}(),function(){const e=t.config.auth?.config?.allowSubdomainAuth??!0,n=window.location.hostname,o=n.split("."),i=o.length>=3&&!n.includes("localhost")&&!/^\d+\.\d+\.\d+\.\d+$/.test(n);if(console.log("checkSubdomainAuth - hostname:",n,"parts:",o,"isSubdomain:",i,"allowSubdomainAuth:",e),e)return!1;if(!i)return!1;const a=o.slice(-2).join("."),s=new URL(window.location.href);return s.hostname=a,console.log("Redirecting to apex domain for authentication:",s.href),window.location.href=s.href,!0}()||(function(){const e=new URL(window.location.href).searchParams.get("authReturnUrl");e?document.querySelectorAll("a[href]").forEach(t=>{if(!t.href.includes("/signin")&&!t.href.includes("/signup")&&!t.href.includes("/reset"))return;const n=new URL(t.href,window.location.origin);n.searchParams.set("authReturnUrl",e),t.href=n.toString()}):console.warn("No authReturnUrl provided in URL parameters.")}(),document.querySelectorAll(".uj-password-toggle").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".input-group").querySelector("input");if(!t)return;const n="password"===t.type?"text":"password";t.type=n;const o=e.querySelector(".uj-password-show"),i=e.querySelector(".uj-password-hide");o&&i&&("text"===n?(o.classList.add("d-none"),i.classList.remove("d-none")):(o.classList.remove("d-none"),i.classList.add("d-none")))})}))})}}}]);